
<BarLabel@Label>:
	id: barlabel
	size_hint: None, None
	size: self.parent.width * 0.15, self.parent.height * 0.15
	y: self.parent.y + self.parent.height * 0.80
	canvas:
		Color: 
			rgba: 0, 1, 0, 0.2
								
		Rectangle: 
			pos: self.pos
			size: self.size

<Bar>:
    id: bar
    
    # d1: distance from edge, d2=spacing, w = width
    #2*d1 + (n - 1)*d2 + n*w = 1
    #d1 = 0.075, d2=0.15, w = 0.15

	size_hint: None, None
	size: self.parent.width * 0.15, self.parent.height * 0.7
	y: self.parent.y + self.parent.height * 0.075
    
    canvas:
        Color:
            rgba: 0, 1, 0, 0.2                                
        Rectangle:
            pos: self.pos
            size: self.size
        Rectangle:
            pos: self.pos
            size: self.width, self.height * (bar.curVal / bar.maxVal) 
    Label:
        text: "%0.2f" %(bar.curVal)




<Timer>:
    pos: self.parent.x, self.parent.y
    Button:
        id: timerButton
        text: "Start"
        on_press: root.button_clicked()
        pos: self.parent.x, self.parent.y
        size: self.parent.width, self.parent.height
        font_size: 30

<LineGraph>:
    id: linegraph
    y_ticks_major: 100
    x_ticks_major: 10
    x_ticks_minor: 5
    y_ticks_minor: 5
    xlabel: linegraph.xLabel
    ylabel: linegraph.yLabel
    padding: 5
    xmin: linegraph.xMin
    xmax: linegraph.xMax
    ymin: linegraph.yMin
    ymax: linegraph.yMax
    y_grid_label: True
    x_grid_label: True

<changescreen>
 
    size_hint_y: None
    height: 25
    size:
    orientation: 'horizontal'
    Button:
        text: "Welcome screen"
        font_size: 20
        backgroundcolor: (0,0,0,0.5)
        on_release: app.root.current = 'first'
    Button:
        text: "Flight data"
        font_size: 20
        backgroundcolor: (0,0,0,0.5)
        on_release: app.root.current = 'second'
    Button:
        text: "Time to launch"
        font_size: 20
        backgroundcolor: (0,0,0,1)
        on_release: app.root.current = 'third'        

<MainScreen>:
    name: 'first'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "Welcome to:"
            font_size: 75
            size_hint_y: None
            height: 85
        Label:
            Image:
                source: "CUSFlogo.jpg"
                size: root.width, root.height
                keep_ratio: True
                allow_stretch: True
                center: self.parent.center
        Label:  
            text: "EARS ground station"
            font_size: 75
            size_hint_y: None
            height:110
        changescreen:


<Screen2>:
    name: 'second'
    BoxLayout:
        orientation: 'vertical'
        backgroundcolor: (100,200,0,1)

        ScrollView:
            text: str('A very long string ' * 100)
            Label:
                text: self.parent.text
                font_size: 35
                text_size: self.width, None
                size_hint_y: None
                height: self.texture_size[1]
        changescreen:

<DataScreen>:
    name: 'third'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 35

            StatusBox:
                id: status1
                text: "Launch"
                
            StatusBox:
                id: status2
                text: "Parachute deployed"
                
            StatusBox:
                id: status3
                text: "Stage 2 ignition"

            StatusBox:
                id: status4
                text: "Parachute deployed"
            
            StatusBox:
                id: status5
                text: "Touch down"


        BoxLayout:
            orientation: 'horizontal'

            BoxLayout:
                size_hint_x: None
                width: 0.6 * self.parent.width
                
                orientation: 'vertical'
                LineGraph:        
                    id: graph
                    size_hint_y: None
                    height: self.parent.height * 0.8

                ScrollView:
                    id: commandoutput

                    text: str("\n") 
                    Label:
                        text: self.parent.text
                        font_size: 18
                        text_size: self.width, None
                        size_hint_y: None
                        height: self.texture_size[1]
            BoxLayout:
                orientation: 'vertical'
                Label: 

                    size_hint_y: None
                    height: self.parent.height * 0.3

                    Timer:
                        id: timer
                        size_hint: None, None
                        size: self.parent.width , self.parent.height 
                        pos: self.parent.x , self.parent.y 

                Label:
                    size_hint_y: None
                    height: self.parent.height * 0.5
                    canvas:
                        Color: 
                            rgba: 0, 0, 1, 0.2
                            
                        Rectangle: 
                            pos: self.pos
                            size: self.size


				    Bar:	
                        id: bar1
                        maxVal: 1000.0
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/3 * 0
					
					BarLabel:
						id: barlabel1
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/3 * 0
						text: "BarLabel1"

				    Bar:	
                        id: bar2
                        maxVal: 100.0
						x: self.parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/3 * 1

					BarLabel:
						id: barlabel2
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/3 * 1
						text: "BarLabel2"


					Bar:
                        id: bar3
                        maxVal: 100.0
                        x: self.parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/3 * 2

					BarLabel:
						id: barlabel3
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/3 * 2
						text: "BarLabel3"

							
					Bar:
                        id: bar4
                        maxVal: 50.0
						x: self.parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/3 * 3

					BarLabel:
						id: barlabel4
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/3 * 3
						text: "BarLabel4"
					

                Label:    
                    Image: 
                        source: "CUSFlogo.jpg"
                        size: self.parent.width , self.parent.height 
                        keep_ratio: False
                        allow_strech: True
                        pos: self.parent.x, self.parent.y

        changescreen:

                

<Gui>:
    dataScreen: screen3
    MainScreen:
        id: screen1
    Screen2: 
        id: screen2
    DataScreen:
        id: screen3
