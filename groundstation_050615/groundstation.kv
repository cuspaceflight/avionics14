
<BarLabel@Label>:
	id: barlabel
	size_hint: None, None
	size: self.parent.width * 0.10, self.parent.height * 0.15
	y: self.parent.y + self.parent.height * 0.80
	font: 5
	canvas:
		Color: 
			rgba: 0, 1, 0, 0.2
								
		Rectangle: 
			pos: self.pos
			size: self.size

<Bar>:
    id: bar
    
    # d1: distance from edge, d2=spacing, w = width
    #2*d1 + (n - 1)*d2 + n*w = 1
    #d1 = 0.075, d2=0.15, w = 0.15

	size_hint: None, None
	size: self.parent.width * 0.10, self.parent.height * 0.7
	y: self.parent.y + self.parent.height * 0.075
    
    canvas:
        Color:
            rgba: 0, 1, 0, 0.2                                
        Rectangle:
            pos: self.pos
            size: self.size
        Rectangle:
            pos: self.pos
            size: self.width, self.height * (bar.curVal / bar.maxVal) 
    Label:
        text: "%0.2f" %(bar.curVal)




<Timer>:
    pos: self.parent.x, self.parent.y
    Button:
        id: timerButton
        text: "Start"
        on_press: root.button_clicked()
        pos: self.parent.x, self.parent.y
        size: self.parent.width, self.parent.height
        font_size: 30


<changescreen>
 
    size_hint_y: None
    height: 25
    size:
    orientation: 'horizontal'
    Button:
        text: "Welcome screen"
        font_size: 20
        backgroundcolor: (0,0,0,0.5)
        on_release: app.root.current = 'first'
    Button:
        text: "Time to launch"
        font_size: 20
        backgroundcolor: (0,0,0,1)
        on_release: app.root.current = 'third'     




<MainScreen>:
    name: 'first'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "Welcome to:"
            font_size: 75
            size_hint_y: None
            height: 85
        Label:
            Image:
                source: "CUSFlogo.jpg"
                size: root.width, root.height
                keep_ratio: True
                allow_stretch: True
                center: self.parent.center
        Label:  
            text: "EARS ground station"
            font_size: 75
            size_hint_y: None
            height:110
        changescreen:



<DataScreen>:
    name: 'third'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: 35

            StatusBox:
                id: status1
                text: "Launch"
                
            StatusBox:
                id: status2
                text: "Drogue deployed"
                
            StatusBox:
                id: status3
                text: "Stage 2 ignition"

            StatusBox:
                id: status4
                text: "Main deployed"
            
            StatusBox:
                id: status5
                text: "Touch down"


        BoxLayout:
            orientation: 'horizontal'

            BoxLayout:
                size_hint_x: None
                width: 0.7 * self.parent.width
                
                orientation: 'vertical'
                Label:
					
					id: labels
                    size_hint_y: None
                    height: self.parent.height * 0.8
					
				    Bar:	
                        id: bar1
                        maxVal: 100.0
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 0
					
					BarLabel:
						id: barlabel1
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 0
						text: "Altitude \n    (top)"

				    Bar:	
                        id: bar2
                        maxVal: 100.0
						x: self.parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 1

					BarLabel:
						id: barlabel2
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 1
						text: "Velocity \n  (top)"


					Bar:
                        id: bar3
                        maxVal: 100.0
                        x: self.parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 2

					BarLabel:
						id: barlabel3
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 2
						text: "Acceleration \n     (top)"

							
					Bar:
                        id: bar4
                        maxVal: 50.0
						x: self.parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 3

					BarLabel:
						id: barlabel4
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 3
						text: " Altitude\n (Bottom)"
						
												
					Bar:
                        id: bar5
                        maxVal: 50.0
						x: self.parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 4

					BarLabel:
						id: barlabel5
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 4
						text: "Velocity\n (Bottom)"

												
					Bar:
                        id: bar6
                        maxVal: 50.0
						x: self.parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 5

					BarLabel:
						id: barlabel6
						x: self. parent.x + self.parent.width * 0.075 + self.parent.width * 0.7/5 * 5
						text: " Acceleration\n   (Bottom)"


                 

                ScrollView:
                    id: commandoutput

                    text: str("\n") 
                    Label:
                        text: self.parent.text
                        font_size: 18
                        text_size: self.width, None
                        size_hint_y: None
                        height: self.texture_size[1]
            BoxLayout:
                orientation: 'vertical'
                Label: 

                    size_hint_y: None
                    height: self.parent.height * 0.3

                    Timer:
                        id: timer
                        size_hint: None, None
                        size: self.parent.width , self.parent.height 
                        pos: self.parent.x , self.parent.y 

                Label:
                    size_hint_y: None
                    size_hint_x: None
                    height: self.parent.height * 0.5
                    width: self.parent.width
					Image:
						source: "Badger_background.png"
						size: self.parent.width, self.parent.height
						keep_ratio: True
						allow_stretch: True
						center: self.parent.center




					

                Label:    
                    Image: 
                        source: "CUSFlogo.jpg"
                        size: self.parent.width , self.parent.height 
                        keep_ratio: False
                        allow_strech: True
                        pos: self.parent.x, self.parent.y

        changescreen:

                

<Gui>:
    dataScreen: screen3
    MainScreen:
        id: screen1
    DataScreen:
        id: screen3
